# Prompt Optimizer - 提示优化器

## 简介

Prompt Optimizer skill用于将模糊的提示转化为精确、可操作的规范，使用EARS（Easy Approach to Requirements Syntax）方法学——一种用于将自然语言转化为结构化、可测试需求的Rolls-Royce方法。

## 使用场景

当用户提供时应用：
- 模糊的功能请求（"构建仪表板"、"创建提醒应用"）
- 需求缺乏特定条件、触发器或可测量结果
- 自然语言描述需要转化为可测试的规范
- 用户明确请求提示优化或需求细化

## 六步优化工作流

### 步骤1：分析原始需求

识别弱点：
- **过于宽泛** - "添加用户认证" → 缺少密码要求、会话管理
- **缺少触发器** - "发送通知" → 缺少何时/为什么通知触发
- **模糊动作** - "使其用户友好" → 没有可测量可用性标准
- **没有约束** - "处理支付" → 缺少安全、合规要求

### 步骤2：应用EARS转换

将需求转化为EARS模式。

**五个核心模式：**
1. **普遍性**：`系统应该<动作>`
2. **事件驱动**：`当<trigger>时，系统应该<动作>`
3. **状态驱动**：`当<state>时，系统应该<动作>`
4. **条件性**：`如果<condition>，系统应该<动作>`
5. **不想要的行为**：`如果<condition>，系统应该防止<unwanted action>`

**快速示例：**
```
之前："创建带有任务管理的提醒应用"

之后（EARS）：
1. 当用户创建任务时，系统应该引导分解为可执行的子任务
2. 当任务截止时间在30分钟内且用户尚未开始时，系统应该发送带有声音警报的通知
3. 当用户完成子任务时，系统应该更新进度并提供积极反馈
```

**转换检查表：**
- [ ] 识别隐含条件并使其显式化
- [ ] 指定触发事件或状态
- [ ] 使用精确的动作动词（should、must、should）
- [ ] 添加可测量标准（"在30分钟内"、"至少8个字符"）
- [ ] 将复合需求分解为原子语句
- [ ] 删除模糊语言（"用户友好"、"快速"）

### 步骤3：识别领域理论

将需求匹配到已建立的框架。

**常见领域映射：**
- **生产力** → GTD、番茄工作法、艾森豪威尔矩阵
- **行为改变** → BJ Fogg模型（B=MAT）、原子习惯
- **UX设计** → 希克定律、费茨定律、格式塔原则
- **安全** → 零信任、深度防御、隐私设计

**选择过程：**
1. 从需求关键词识别主要领域
2. 匹配到2-4个互补理论
3. 将理论原则应用于特定功能
4. 在增强提示中引用理论以获得可信度

### 步骤4：提取具体示例

生成带有真实数据的具体示例：
- 用户场景："当用户在移动设备上登录时..."
- 数据示例："产品：'笔记本电脑'，价格：$999，库存：15"
- 工作流示例："任务：写报告 → 子任务：研究（2h）、草稿（3h）、编辑（1h）"

示例必须**真实**、**具体**、**多样化**（成功/错误/边缘情况）和**可测试**。

### 步骤5：生成增强提示

使用标准框架构建：

```markdown
# Role
[具有领域专业知识的特定专家角色]

## Skills
- [核心能力1]
- [核心能力2]
[与领域理论对齐的5-8个技能列表]

## Workflows
1. [阶段1] - [关键活动]
2. [阶段2] - [关键活动]
[完整的分步过程]

## Examples
[带有真实数据的具体示例，不是占位符]

## Formats
[精确的输出规范：
- 文件类型、结构要求
- 设计/样式期望
- 技术约束
- 可交付检查表]
```

**质量标准：**
- **角色特异性**："专门从事时间管理应用的产品设计师" > "设计师"
- **理论基础** - 明确引用框架
- **可操作工作流** - 清晰的输入/输出和决策点
- **具体示例** - 真实数据，不是"示例1"、"示例2"
- **可测量格式** - 具体要求，不是"好的设计"

### 步骤6：展示优化结果

以结构化格式输出：

```markdown
## 原始需求
[用户的模糊需求]

**识别的问题：**
- [问题1：例如，"缺少特定触发条件"]
- [问题2：例如，"没有可测量成功标准"]

## EARS转换
[EARS格式化的需求编号列表]

## 领域和理论
**主要领域：** [例如，认证安全]

**适用理论：**
- **[理论1]** - [简要相关性]
- **[理论2]** - [简要相关性]

## 增强提示
[完整的Role/Skills/Workflows/Examples/Formats提示]

---

**如何使用：**
[关于如何应用提示的简要指导]
```

## 高级技术

对于复杂场景，见`references/advanced_techniques.md`：
- **多利益相关者需求** - 每种用户类型的EARS语句
- **非功能需求** - 带有量化阈值的性能、安全、可扩展性
- **复杂条件逻辑** - 带有布尔运算符的嵌套条件

## 快速参考

**做：**
✅ 分解复合需求（每个需求一个EARS语句）
✅ 指定可测量标准（数字、时间框架、百分比）
✅ 包含错误/边缘情况
✅ 基于已建立理论
✅ 使用带有真实数据的具体示例

**不做：**
❌ 避免模糊语言（"快速"、"用户友好"）
❌ 不要假设隐含知识
❌ 不要在一个语句中混合多个动作
❌ 不要在示例中使用占位符
